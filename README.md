> **创建日期:** 2021/10/8
>
> **作者:** dao77777

- [书](#书)
- [Linux发展史](#linux发展史)
  - [UNIX](#unix)
  - [GNU](#gnu)
  - [Open Source](#open-source)
- [硬件](#硬件)
  - [CPU](#cpu)
  - [主存](#主存)
  - [I/O设备](#io设备)
  - [总线](#总线)
  - [接口](#接口)
  - [BIOS](#bios)
- [层次](#层次)
- [系统](#系统)
- [文件](#文件)
  - [IO文件](#io文件)
  - [目录操作](#目录操作)
  - [文件操作](#文件操作)
  - [硬盘管理](#硬盘管理)
  - [压缩备份](#压缩备份)
  - [权限管理](#权限管理)
  - [软件管理](#软件管理)
- [进程](#进程)
  - [进程管理](#进程管理)
  - [服务管理](#服务管理)
- [网络](#网络)
  - [网络管理](#网络管理)
  - [防火墙管理](#防火墙管理)
- [SHELL](#shell)
- [软件](#软件)
  - [虚拟化软件](#虚拟化软件)
  - [SSH](#ssh)
- [操作系统](#操作系统)
  - [职责](#职责)
  - [进程](#进程-1)
  - [系统调用API](#系统调用api)

# 书
- [鸟哥私房菜](http://linux.vbird.org/)
- UNIX环境高级编程
- UNIX网络编程

# Linux发展史
## UNIX
- BSD
- System V
- Minix
- Linux
  - RHEL Fedora CentOS SuSE OpenSuSE: 使用RPM管理软件的Linux发行版
  - Ubuntu Debian B2D: 使用DPKG管理软件的Linux发行版
  - Android
  - 标准: POSIX, FHS, LSB
## GNU
- Emacs
- GNU C(GCC)
- GNU C Library(glibc)
- Bash shell
## Open Source
- Apache License 2.0
- BSD 3-Clause "New" or "Revised" license
- BSD 2-Clause "Simplified" or "FreeBSD" license
- GNU General Public License(GPL)
- GNU Library or "Lesser" General Public License(LGPL)
- MIT license
- Mozilla Public License 2.0
- Common Development and Distribution License
                
# 硬件
## CPU
- CPU的组成: ALU CU X MAR MDR IR PC
- 指令集
  - RISC: SPARC, PowerPC, ARM
  - CISC: x86
- 性能指标: 主频
- 超线程(Hyper-Threading HT): 4核8线程, 8核16线程, 线程数可以超过核心数
- CPU性能测试软件: CPU-Z
## 主存
  - RAM
    - DRAM(随机存储器)
      - SDRAM, DDR
    - SRAM(高速缓存)
    - ROM(只读存储器)
      - EEPROM
## I/O设备
- 辅存
  - 产品分类
    - HDD(机械硬盘), SSD(固态硬盘)
  - 性能指标: IOPS
  - 文件系统
    - Linux: ext2/ext3/ext4, xfs, swap, bios boot 
    - Windows: ntfs
    - 网络: nfs, smbfs
    - 通用: fat, vfat
  - 分割类型
    - MBR
    - GPT
  - 磁轨, 磁柱, 磁区
  - 磁区大小
    - MBR硬盘: 512byte
    - GPT硬盘: 4K
  - 第一磁区
    - 开机启动文件: 446byte, 含开机启动管理程序, Linux中是grub
    - 分割表
      - MBR硬盘: 64byte, MSDOS格式
      - GPT硬盘: 4K - 446byte, GPT格式
  - 分区
    - 分类: 主分区/扩展分区/逻辑分区
    - 组成
      - boot sector: 开机启动块, 多系统的来源
      - 多个block group
        - metadata: fileSystem description, superblock, inode bitmap, block bitmap
        - data: inode, data block
        - 索引式文件系统, 链式文件系统
        - mtime: 内容更新时间
        - ctime: 权限属性更新时间
        - atime: 内容被取用更新时间
- 显卡
- I/O地址, IRQ中断
## 总线
- 传输单位: 位, 字节, 字长
- CPU与主存的数据传输解决方案
  - Intel
    - QPI, DMI
  - AMD
    - Hyper Transport
- 片内总线
- 系统总线
  - 前端总线(FSB): 集中在北桥芯片(高速设备通过北桥芯片连接CPU), 现继承在CPU中
  - 后端总线: 集中在南桥芯片(低俗设备的通过南桥芯片连接CPU)
## 接口
- 串口， 并口
- 通用: USB, 雷电, SCSI, PS/2
- 显卡: PCI, AGP, PCI-E
- 显示器: D-Sub, DVI, HDMI, Display port
- 网口: RJ-45
- 硬盘: SATA, SAS, IDE, M.2
## BIOS
- CMOS: DRAM, 记录主板参数, 系统时间,CPU电压与频率, 各项设备I/O地址与IRQ
- BIOS/UEFI: ROM, 引导程序

# 层次
- 硬件->内核->系统调用->应用程序

# 系统
- `/etc/os-release`: linux发行版详细信息
- `/proc/cpuinfo`: cpu的详细信息
- `uname -r`: 查看linux内核版本
- `/etc/hostname`: 主机名
- `/etc/issue, /etc/motd`: 进站欢迎信息
  - `\d`: 显示本地端时间的日期
  - `\l`: 显示第几个终端界面
  - `\m`: 显示硬件等级 (i386/i486/i586/i686...)
  - `\n`: 显示主机网络名称
  - `\O`: 显示域名
  - `\r`: 操作系统内核版本 (相当于 `uname -r`)
  - `\t`: 显示本地端时间的日期
  - `\S`: 操作系统名称
  - `\v`: 操作系统版本
- `${PS1}`: 命令行提示符
- `${PS2}`: 命令行跳脱符
- `locale`: 查看语系
  - `LANG = <语系>, export LC_ALL=<语系>`: 改变语系, zh_CN.UTF-8代表中文, en_US.utf8代表英文
- `date, cal`: 查询时间及日历
- `bc`: 计算器
- `--help, man, info, /usr/share/doc`: 文档
- `sync`: 主存数据同步到辅存
- `init <runLevel>`: 常用运行级别未3, 5
  - 0: 关机
  - 1: 单用户
    1. 重启过程中按e进入编辑界面
    2. 找到`fi linux16`
    3. 在UTF-8后空格添加`init=/bin/sh`
    4. 摁ctrl+x进入单用户模式
    5. 输入`mount -o remount, rw /`
    6. 在新的一行输入`passwd`, 然后输入两次密码
    7. 输入`touch /.autorelabel`
    8. 输入`exec /sbin/init`
  - 2: 多用户状态无网络服务
  - 3: 多用户状态有网络服务
  - 4: 系统未使用保留给用户
  - 5: 图形界面
  - 6: 重启
- `systemctl get-default`: 获取默认运行级别
- `systemctl set-default <runLevel>`: 设置默认运行级别, multi-user.target表示运行级别3, graphical.target表示运行级别5
- shutdown
  - `-h now`: 立即关机
  - `-h <number>`: 指定分钟关机
  - `-r now`: 立即重启
  - `-r <number>`: 指定分钟后重启
- `halt`: 关机
- `reboot`: 重启
- `uuidgen`: 生成uuid
- `/usr/share/doc`: Linux文档

# 文件
## IO文件
- 硬盘
  - `/dev/sd[a-p][1-9]?`: SCSI/SATA/USB, 其中1-4为主要分割槽, 5-9为逻辑分割槽
  - `/dev/vd[a-p]`: 虚拟机
  - `/dev/fd[0-1]`: 软盘
  - `/dev/hd[a-d]`: IDE硬盘(旧式系统才有)
- 打印机
  - `/dev/usb/lp[0-15]`: USB接口打印机
  - `/dev/lp[0-15]`: 打印机
- 鼠标
  - `/dev/input/mouse[0-15]`: 鼠标
  - `/dev/psaux`: PS/2接口的鼠标
  - `/dev/mouse`: 当前鼠标
- CDROM/DVDROM
  - `/dev/scd[0-1]`
  - `/dev/sr[0-1]`
  - `/dev/cdrom` 
- 磁带
  - `/dev/ht0`
  - `/dev/st0`
  - `/dev/tape`
## 目录操作
- 路径
  - `.`: 当前目录
  - `..`: 上级目录
  - `-`: 上一个目录
  - `~`: 家目录
- 文件种类
  - `-`: 常规文件
    - 纯文字
    - 二进制
    - 特定格式
  - `d`: 目录
  - `l`: 链接
  - `b`: 区块设备, 可以随机在设备不同区块中读写, 如硬盘
  - `c`: 字符设备, 一次性读取, 能够不断输出的设备, 如键鼠
  - `s`: 套接字
  - `p`: 管道
- `pwd`: 打印当前工作目录
  - `-P`: 真实路径, 而不是链接
- `ls [-al]`
- `basename <path>`: 给出路径文件名
- `dirname <path>`: 给出路径目录名
- `file <filename>`: 查看文件类型, 有没有使用到动态函数库等信息
- `which <cmd>`: 查询命令所在路径
- `whereis`
- `locate`
- `find <finame | dirname>`: 从指定目录开搜
  - `-name <filename | dirname>`: 指定文件或目录
  - `-user <user>`: 指定用户
  - `-size <file_size>`: 指定文件大小(+n 大于, -n小于, n等于, 单位k, M, G)
  - `-atime <day>`: 指定天数(+n大于, -n小于, n等于)
- `cd <dirname>`: 切换目录
- `mkdir <dirname>`: 创建目录
  - `-p`: 创建多级目录
- `touch <filename>`: 创建文件
- `cp <source> <dest>`: 复制
- `ln`
- `mv <source> <dest>`: 剪切(重命名)
- `rm -rf <filename | dirname>`: 删除
- `ln <source> <dest> [-r]`: 创建链接/软链接
## 文件操作
- `od <filename>`: 二进制的方式读取文档
  - `-t`: 设置显示类型
    - `a       `: 利用預設的字元來輸出；
    - `c       `: 使用 ASCII 字元來輸出
    - `d[size] `: 利用十進位(decimal)來輸出資料，每個整數佔用 size bytes
    - `f[size] `: 利用浮點數值(floating)來輸出資料，每個數佔用 size bytes
    - `o[size] `: 利用八進位(octal)來輸出資料，每個整數佔用 size bytes
    - `x[size] `: 利用十六進位(hexadecimal)來輸出資料，每個整數佔用 size bytes
- `cat <filename>`
- `more <filename>`
- `less <filename>`
- `head <filename>`: 显示头几行
  - `-n <行数>`: 指定行数
- `tail <filename>`: 显示末几行
  - `-n <行数>`: 指定行数
  - `-f`: 同步刷新
- `vi | vim | nano <filename>`: 文本编辑
- `grep`, `awk`, `sed`
- `wc`, `cut`, `sort`, `uniq`
- `tr`, `col`, `join`, paste, `expand`
- `tee`
- `split`
- `xargs`
- `|`: 管道符
- `>`: 输出重定向, 覆盖
- `>>`: 输出重定向, 追加
- `2>`: 错误输出重定向, 覆盖
- `2>>`: 错误输出重定向, 追加
## 硬盘管理
- `df [<path>]`: 硬盘使用情况, `df -hT`
  - `-h`: 以易读的方式显示
  - `-a`: 列出所有文件系统
  - `-T`: 显示文件系统类型(如ext2/3/4, xfs等)
- `du [<path>]`: 文件占用磁盘情况
  - `-a`: 列出所有文件
  - `-h`: 以易读的方式显示
  - `-s`: 只列出总容量
- `lsblk`: 列出所有磁盘
  - `-f`: 列出磁盘的UUID
- `parted`: 磁盘分割
- `fdisk`: MBR分割表使用的磁盘分割工具
- `gdisk`: GPT分割表使用的磁盘分割工具
- `mkfs.<file_system> <device>`: 格式化分区的文件系统
  - `-f`: 强制格式化, 可以用来格式化一些文件用来`mount -o loop`挂载
- `mount UUID="<UUID>"/<device> <path>`: 挂载分区
  - `-o <params>`: 设定各种挂载参数, `-o loop` 可用来挂载iso映像文件
- `umount <device>/<mount point>`: 卸载分区
- `mkswap <device>`: 格式化分区文件系统为swap格式
- `swapon <device>`: 开启该swap分区
  - `-s`: 查看swap分区的使用情况
- `free`: 查看内存与swap分区的占用情况
  - `-h`: 以易读的方式显示
- `/etc/fstab`: 开机挂载设置, 格式为 UUID 挂载点 文件系统 参数 dump fsck
## 压缩备份
- 压缩格式
  - `.Z`: compress
  - `.zip`: zip
  - `.gz`: gzip
  - `.bz2`: bzip2
  - `.xz`: xz
  - `.tar`: tar, 只进行打包, 不进行压缩
  - `.tar.gz`: tar打包与gzip压缩
  - `.tar.bz2`: tar打包与bzip2压缩
  - `.tar.xz`: tar打包与xz压缩
- tar
  - `-z`: gzip压缩/解压
  - `-j`: bzip2压缩/解压
  - `-J`: xz压缩、解压
  - `-c`: 打包 
  - `-x`: 解包
  - `-t`: 查询
  - `-v`: 过程中显示文件名
  - `-f <filename>`: 指定目标文件
  - `-C <path>`: 用于在解压缩中指定目录
  - `-p`: 保留文件权限与属性
  - `-P`: 保留绝对路径
  - `--exclude=<filename>`: 排除某个文件
- `xfsdump`
- `xfsrestore`
- `mkisofs`
- `isoinfo`
- `cdrecord`
- `cpio`
- `dd if=<input_file> of=<output_file> bs=<block_size> count=<block_count>`
## 权限管理
- 权限分类
  - 普通权限
  - 隐藏权限
  - 特殊权限
  - SUID, SGID, SBIT
- `/etc/passwd`: 用户配置文件, 每行含义 用户名:口令:uid:gid:注释/主目录/登录shell
- `/etc/shadow`: 加密后的用户口令
- `/etc/group`: 组配置文件, 每行含义 组名:口令:gid:组内用户列表
- `visudo`: 修改sudo用户
- `umask <right>`: 新创建文件或目录时默认去掉的权限, 文件默认rw-rw-rw-, 目录默认rwxrwxrwx, 减去umask的right得到默认权限
- `useradd <username>`: 添加用户
- `userdel <username>`: 删除用户
- `usermod <username>`: 修改用户
  - `-g <groupName>`: 修改用户组名
  - `-d <path>`: 修改homedir路径
- `passwd <username>`: 修改用户口令
- `id <username>`: 查询用户信息
- `who`: 查询当前用户
- `su <username>`: 切换当前用户
- `groupadd <groupName>`: 添加组
- `groupdel <groupName>`: 删除组
- `chown <username> <path>`: 改变资源所属用户
- `chgrp <groupName> <path>`: 改变资源所属组
- `chmod <right> <path>`: 改变资源权限, right中 r=4 w=2 x=1, 如chmod 751 ./wow.md
## 软件管理
- rpm
  - `-q <packageName>`: 查询是否安装指定软件包
  - `-qa`: 查询所有已安装软件包
  - `-qi <packageName>`: 查询已安装指定软件包信息
  - `-ql <packageName>`: 查询已安装指定软件包中的文件
  - `-qf <path>`: 查询dir或file属于哪个软件包
  - `-e[ --nodeps] <packageName>`: 卸载[强制]指定软件包
  - `-ivh <path>`: 安装指定软件包
- yum
  - `/etc/yum.repos.d`: 配置文件
  - `yum install 包`: 安装指定包
  - `yum remove 包`: 卸载指定包
  - `yum search 包`: 搜索包的相关信息
  - `yum provides 包`: 查看包来源
  - `yum whatprovides 命令`: 查询命令在什么包中
  - `yum list`: 查看服务器中可安装的软件包列表
  - `yum info kernel -q`: 检测内核版本, 显示可以升级的内核
  - `yum-config-manager --add-repo 仓库`: 更新仓库
  - `yum makecache fast`: 更新源
  - `yum update kernel`: 升级内核
- dpkg
  - `-l`: 显示已安装的软件列表
  - `-i 包`: 安装指定包
  - `-i --instdir=包安装路径 包`: 安装包到制定路径
  - `-r 包`: 删除指定包
  - `-P 软件`: 删除软件同时删除其配置文件
  - `-L 软件`: 显示与软件关联的文件
  - `--unpack`: 解开包
  - `-c`: 显示包内文件列表
  - `--configure`: 配置软件
- apt
  - `/etc/apt/sources.list`: 修改源
  - `apt-get update`: 更新源
  - `apt-get dist-upgrade`: 更新系统
  - `apt-get install 包名`: 安装包
    - `--reinstall`: 重新安装
    - `-f`: 修复安装
  - `apt-get build-dep 包名`: 安装相关的编译环境
  - `apt-get source 包名`: 下载包的源码
  - `apt-get upgrade`: 更新已安装的包
  - `apt-get remove 包名`: 卸载包
    - `--purge`: 删除包括配置文件
  - `apt-cache search 包名`: 搜索包
  - `apt-cache show 包名`: 获取包信息
  - `apt-cache depends 包名`: 获取包的依赖信息
  - `apt-cache rdepends 包名`: 获取包的被依赖信息

# 进程
## 进程管理
- `ps -aux|-ef`: 查看进程状态
- `top`: 动态监控进程状态
- `kill <PID>`: 终止进程
  - `-9`: 强制终止
## 服务管理
- 配置文件
  - `/usr/lib/systemd/system目录`: systemctl可以管理的服务
  - `/etc/init.d目录`: service指令管理的服务
- `systemctl start或stop或restart或reload或status 服务名`: 启动指定服务
- `setup`: 查看服务, 设置服务自启动
- `chkconfig 服务名 off或on`: 查看service管理的服务在各个运行级别下的自启动状态
  - `--list`: 查看服务
  - `--level 运行级别 服务名 off或on`: 设置服务在各个级别上的自启动
- `systemctl list-unit-files`: 查看systemctl管理的服务在3和5运行级别下的自启动状态
- `systemctl enable 服务名`: 设置服务在3和5运行级别下自启动
- `systemctl disable 服务名`: 关闭服务在3和5运行级别下自启动
- `systemctl is-enabled 服务名`: 查询指定服务是否在3和5运行级别下自启动

# 网络
## 网络管理
- `/etc/sysconfig/network-scripts/网卡`: 配置文件
- `netstat -ano|-tln`: 查询网络状态
- `ping <IP>`: 测试主机是否能ping通
- `telnet <IP> <PORT>`: 测试指定IP与PORT的服务
- `nc <IP> <PORT>`: 同上
- `curl <IP> <PORT>`: 发送HTTP请求
  - `-I`: 显示头部
  - `-d <param>`: 携带参数
  - `-X <method>`: 指定请求方法
  - `-H <head>`: 自定义头部
- `wget <URL>`: 下载文件
- `export http_proxy="http:<IP>:<PORT>"`: 设置http代理
## 防火墙管理
- 客户: firewall-cmd
- 服务: firewalld
- 指令
  - `firewall-cmd --list-all`: 查看用户开放的所有端口
  - `firewall-cmd --zone=public --list-ports`: 查看所有用户自己开放的端口
  - `firewall-cmd --permanent --add-port=端口号/协议`: 开放端口访问
  - `firewall-cmd --permanent --remove-port=端口号/协议`: 关闭端口访问
  - `firewall-cmd --reload`: 重新载入服务才能生效
  - `firewall-cmd --query-port=端口/协议`: 查询端口是否开放

# SHELL
- shell分类
  - Bourne SHell(sh)
  - C SHell
  - K SHell
  - TCSH
  - Bourne Again SHell(bash)
- `/etc/shells`: 可以使用的shell
- `${<variable>}`: 表示变量
  - `<variable[#|##|%|%%]delete>`: 表示该变量删除delete部分后的值, #从前删除最短的, ##从前删除最长的, %从后删除最短的, %%从后删除最长的
  - `<variable[/old/new|//old/new]>`: 替换变量中指定字符串, /表示替换一次, //表示替换所有
  - `<variable[-|:-|=|?]default>`: -表示若变量不存在用默认代替, :-表示若变量不存在或为空用默认代替, =表示在-基础上用默认值给variable赋值, ?表示不存在则报错
- `$(<cmd>)`: 表示执行命令后返回的值
- `<variable>="<value>"`: 设置变量的值
- `&&, ||`: 布尔运算符
- shell环境变量/自定变量初始化文件: `/etc/profile`, `/etc/profile.d/*.sh`, `/etc/locale.conf`, `~/.bash_profile`, `~/.bashrc`, `/etc/bashrc`
- 环境变量
  - HOME: 家目录
  - SHELL: 当前环境用的哪个shell程序
  - HISTSIZE: 历史命令的个数
  - MAIL: 邮件
  - PATH: 路径
  - LANG: 语系
  - RANDOM: 随机数
- 自定变量
  - HISTFILE: 历史命令放置的文档
  - PS1: 命令提示符
  - PS2: 命令跳脱符
  - $: 当前shell使用的PID
  - ?: 刚执行完的指令的回传值
- `env`: 查看环境变量
- `set`: 显示该shell所有变量
- `unset <variable>`: 取消变量设置
- `export <variable>`: 将变量变为环境变量
- `echo ${<variable>}`: 打印变量
- `type <cmd>`: 查看该指令是否内建
- `read [-p <tips>] [-t <wait_time>] <variable>`: 与键盘交互
- `declare [-aixrp <variable>]`: 设置变量的类型, a为数组, i为整型, x为环境变量(+x为取消环境变量), r为只读, p为显示该变量的属性
- `ulimit [-SHacdfltu]`: 设置使用者的限制
- `alias <alias>=<cmd>`: 给命令起别名, 不加参数则显示所有别名
- `unalias <alias>`: 取消别名设置
- `history`: 历史指令
- `~/.bash_history`: 历史指令记录文件
- `~/.bash_logout`: 登出时执行的指令
- `\`可以跳脱回车键

# 软件
## 虚拟化软件
- VirtualBox
- VMWare
- KVM(Linux自带)
- WSL, WSL2
## SSH
- `ssh <username>@<host>`: ssh进行登录, 指定用户与主机
  - `-i <private_key_path>`: 以公私钥的方式认证, 指定私钥文件地址
  - `-p <port>`: 指定ssh连接的端口号, 默认22
- `ssh-keygen -o`: 生成公私钥匙, 默认生成地址为`~/.ssh`
- `scp`
- `~/.ssh/authorized_keys`: 配置认证的用户, 用公钥表示
- `~/.ssh/known_hosts`: 与另一用户进行ssh通信后会自动生成known_hosts, 表示知道了该用户
- `~/.ssh/config`: 用于配置ssh通信的目标, 本来是ssh `<username>@<host> -p <port> -i <private_key_path>`连接目标用户, 配置了后直接ssh config_user连接目标用户, 格式为
  ```
  Host <config_user>
    User <username>
    HostName <host>
    Port <port>
    IdentityFile <private_key_path>
  ```
- `~/.ssh/id_rsa`: 私钥文件, ssh-keygen生成的默认地址
- `~/.ssh/id_rsa.pub`: 公钥文件, ssh-keygen生成的默认地址 

# 操作系统
## 职责
- 进程管理
- 内存管理
- 文件管理
- 设备管理
## 进程
- 顺序执行
- 并发执行
- 前驱图
- 进程
  - 创建状态
  - 终止状态
  - 就绪态
  - 执行态
  - 阻塞态
  - 挂起
- 进程控制块PCB
- 数据结构
  - 内存表
  - 设备表
  - 文件表
  - 进程表

- 临界资源

- 进程调度算法
- CPU调度算法
- 虚拟内存
- 文件系统

- 虚拟化
  - 进程, 虚拟存储, 设备抽象
- 并发
  - 多个程序分时共享多个处理器; 进程/线程间通信
- 持久化
  - UNIX文件系统和它的后代们(ext2, ext3, ext4, btrfs, xfs, zfs, ...)


- `file <filename>`: 查看文件详细信息
- `gcc <.c_file或asm_file>`: 编译.c文件
- `gcc -c <.c_file或asm_file>`: 编译且链接.c文件
- `gdb <file>`: 调试程序
  - starti: 从第一条指令开始执行
  - layout asm: 查看汇编
  - info register: 查看寄存器
- `ld <.o_file>`: 链接编译出来的.o文件, -e 指定入口函数
- `xxd <file>`: 二进制形式查看文件
- `objdump -d <file>`: 汇编形式查看文件
- `readelf <elf_file>`: 查看elf文件, -h 读取elf文件头
- `strace <cmd>`: 查看执行过程的系统调用
- `pmap <pid>`: 查看进程的地址映射空间

- c编译过程: .c -> (preprocess) -> .i -> (compile) -> .s -> (assembly) -> .o -> link -> .out

## 系统调用API
- 进程控制
  - 进程状态
    - fork: 创建一个新进程
    - clone: 按指定条件创建子进程
    - vfork: 创建一个子进程, 以供执行新程序, 常与execve等同时使用
    - pause: 挂起进程, 等待信号 
    - exit: 中止进程
    - _exit: 立即中止当前进程
    - execve: 运行可执行文件
  - 进程信息
    - getdtablesize: 进程所能打开的最大文件数
    - getpgid: 获取指定进程组标识号
    - setpgid: 设置指定进程组标识号
    - getpgrp: 获取当前进程组标识号
    - setpgrp: 设置当前进程组标识号
    - getpid: 获取进程标识号
    - getppid: 获取父进程标识号
    - capget: 获取进程权限
    - capset: 设置进程权限
    - getsid: 获取会晤标识
    - setsid: 设置会晤标识
  - 调度
    - getpriority: 获取调度优先级
    - setpriority: 设置调度优先级
    - nice: 改变分时进程的优先级
    - sched_get_priority_max: 取得静态优先级的上限
    - sched_get_priority_min: 取得静态优先级的下限
    - sched_getparam: 取得进程的调度参数
    - sched_getscheduler: 取得进程的调度策略
    - sched_setscheduler: 设置进程的调度策略和参数
    - sched_yied: 进程主动让出处理器, 并将自己等候调度队列队尾
  - 其他
    - modify_ldt: 读写进程的本地描述表
    - nanosleep: 使进程睡眠指定的时间
    - personality: 设置进程运行域
    - prctl: 对进程进行特定操作
    - ptrace: 进程跟踪
    - wait, wait3: 等待子进程终止
    - waitpid, wait4: 等待子进程终止
- 文件读写操作
  - fcntl 文件控制
  - open 打开文件
  - creat 创建新文件
  - close 关闭文件描述字
  - read 读文件
  - write 写文件
  - readv 从文件读入数据到缓冲数组中
  - writev 将缓冲数组里的数据写入文件
  - pread 对文件随机读
  - pwrite 对文件随机写
  - lseek 移动文件指针
  - _llseek 在64位地址空间里移动文件指针
  - dup 复制已打开的文件描述字
  - dup2 按指定条件复制文件描述字
  - flock 文件加/解锁
  - poll I/O多路转换
  - truncate 截断文件
  - ftruncate 参见truncate
  - umask 设置文件权限掩码
  - fsync 把文件在内存中的部分写回磁盘
- 文件系统操作
  - access 确定文件的可存取性
  - chdir 改变当前工作目录
  - fchdir 参见chdir
  - chmod 改变文件方式
  - fchmod 参见chmod
  - chown 改变文件的属主或用户组
  - fchown 参见chown
  - lchown 参见chown
  - chroot 改变根目录
  - stat 取文件状态信息
  - lstat 参见stat
  - fstat 参见stat
  - statfs 取文件系统信息
  - fstatfs 参见statfs
  - readdir 读取目录项
  - getdents 读取目录项
  - mkdir 创建目录
  - mknod 创建索引节点
  - rmdir 删除目录
  - rename 文件改名
  - link 创建链接
  - symlink 创建符号链接
  - unlink 删除链接
  - readlink 读符号链接的值
  - mount 安装文件系统
  - umount 卸下文件系统
  - ustat 取文件系统信息
  - utime 改变文件的访问修改时间
  - utimes 参见utime
  - quotactl 控制磁盘配额
- 系统控制
  - ioctl I/O总控制函数
  - _sysctl 读/写系统参数
  - acct 启用或禁止进程记账
  - getrlimit 获取系统资源上限
  - setrlimit 设置系统资源上限
  - getrusage 获取系统资源使用情况
  - uselib 选择要使用的二进制函数库
  - ioperm 设置端口I/O权限
  - iopl 改变进程I/O权限级别
  - outb 低级端口操作
  - reboot 重新启动
  - swapon 打开交换文件和设备
  - swapoff 关闭交换文件和设备
  - bdflush 控制bdflush守护进程
  - sysfs 取核心支持的文件系统类型
  - sysinfo 取得系统信息
  - adjtimex 调整系统时钟
  - alarm 设置进程的闹钟
  - getitimer 获取计时器值
  - setitimer 设置计时器值
  - gettimeofday 取时间和时区
  - settimeofday 设置时间和时区
  - stime 设置系统日期和时间
  - time 取得系统时间
  - times 取进程运行时间
  - uname 获取当前UNIX系统的名称、版本和主机等信息
  - vhangup 挂起当前终端
  - nfsservctl 对NFS守护进程进行控制
  - vm86 进入模拟8086模式
  - create_module 创建可装载的模块项
  - delete_module 删除可装载的模块项
  - init_module 初始化模块
  - query_module 查询模块信息
  - *get_kernel_syms 取得核心符号,已被query_module代替
- 内存管理
  - brk 改变数据段空间的分配
  - sbrk 参见brk
  - mlock 内存页面加锁
  - munlock 内存页面解锁
  - mlockall 调用进程所有内存页面加锁
  - munlockall 调用进程所有内存页面解锁
  - mmap 映射虚拟内存页
  - munmap 去除内存页映射
  - mremap 重新映射虚拟内存地址
  - msync 将映射内存中的数据写回磁盘
  - mprotect 设置内存映像保护
  - getpagesize 获取页面大小
  - sync 将内存缓冲区数据写回硬盘
  - cacheflush 将指定缓冲区中的内容写回磁盘
- 网络
  - getdomainname 取域名
  - setdomainname 设置域名
  - gethostid 获取主机标识号
  - sethostid 设置主机标识号
  - gethostname 获取本主机名称
  - sethostname 设置主机名称
- Socket 套接字
  - socketcall socket系统调用
  - socket 建立socket
  - bind 绑定socket到端口
  - connect 连接远程主机
  - accept 响应socket连接请求
  - send 通过socket发送信息
  - sendto 发送UDP信息
  - sendmsg 参见send
  - recv 通过socket接收信息
  - recvfrom 接收UDP信息
  - recvmsg 参见recv
  - listen 监听socket端口
  - select 对多路同步I/O进行轮询
  - shutdown 关闭socket上的连接
  - getsockname 取得本地socket名字
  - getpeername 获取通信对方的socket名字
  - getsockopt 取端口设置
  - setsockopt 设置端口参数
  - sendfile 在文件或端口间传输数据
  - socketpair 创建一对已联接的无名socket
- 用户管理
  - getuid 获取用户标识号
  - setuid 设置用户标志号
  - getgid 获取组标识号
  - setgid 设置组标志号
  - getegid 获取有效组标识号
  - setegid 设置有效组标识号
  - geteuid 获取有效用户标识号
  - seteuid 设置有效用户标识号
  - setregid 分别设置真实和有效的的组标识号
  - setreuid 分别设置真实和有效的用户标识号
  - getresgid 分别获取真实的,有效的和保存过的组标识号
  - setresgid 分别设置真实的,有效的和保存过的组标识号
  - getresuid 分别获取真实的,有效的和保存过的用户标识号
  - setresuid 分别设置真实的,有效的和保存过的用户标识号
  - setfsgid 设置文件系统检查时使用的组标识号
  - setfsuid 设置文件系统检查时使用的用户标识号
  - getgroups 获取后补组标志清单
  - setgroups 设置后补组标志清单
- 进程间通信
  - ipc 进程间通信总控制调用
  - sigaction 设置对指定信号的处理方法
  - sigprocmask 根据参数对信号集中的信号执行阻塞/解除阻塞等操作
  - sigpending 为指定的被阻塞信号设置队列
  - sigsuspend 挂起进程等待特定信号
  - signal 参见signal
  - kill 向进程或进程组发信号
  - *sigblock 向被阻塞信号掩码中添加信号,已被sigprocmask代替
  - *siggetmask 取得现有阻塞信号掩码,已被sigprocmask代替
  - *sigsetmask 用给定信号掩码替换现有阻塞信号掩码,已被sigprocmask代替
  - *sigmask 将给定的信号转化为掩码,已被sigprocmask代替
  - *sigpause 作用同sigsuspend,已被sigsuspend代替
  - sigvec 为兼容BSD而设的信号处理函数,作用类似sigaction
  - ssetmask ANSI C的信号处理函数,作用类似sigaction
- 消息
  - msgctl 消息控制操作
  - msgget 获取消息队列
  - msgsnd 发消息
  - msgrcv 取消息
  - 管道
  - pipe 创建管道
  - 信号量
  - semctl 信号量控制
  - semget 获取一组信号量
  - semop 信号量操作
  - 共享内存
  - shmctl 控制共享内存
  - shmget 获取共享内存
  - shmat 连接共享内存
  - shmdt 拆卸共享内存

- pthread_create
- pthread_join

- 优化: 缓存, 并发, 虚拟化

- 线程
  - 共享代码, 数据
  - 拥有独立堆栈

- 原子指令: 读, 写, 计算

- 程序=状态机=有向图
  - 指令
  - 状态: 代码, 数据, 堆栈
- 并发的正确性
  - 数据竞争: 两个不同的线程的两个操作访问同一段内存, 且至少有一个是store, 其中没有原子操作间隔
  - 去除不想要的死锁, 有向图上不想要的环路
  - 去除不想要的顺序, 有向图上不想要的支路
- 互斥
  - 软件层面
    - Peterson算法, 只能实现两个线程的互斥
  - 硬件层面
    - 方式
      - 提供TAS, lock xchg, lock add原子指令, 以原子指令构造其他原子指令达成互斥
      - LR/SC机制, 可构造任意原子指令
    - 自旋锁
    - 互斥锁
    - 乐观锁
- 原子性, 顺序性, 可见性
- TSL(test and set locak), CAS(compare and swap)

- 《THE ART of MULTIPROCESSOR PROGRAMMING》
- 《并发算法与理论》



- 阻塞, 非阻塞, 同步, 异步
- poll, select, epoll
- 单线程Accept
- 单线程Accept+多线程读写业务(无I/O复用)
- 单线程多路I/O复用
- 单线程多路I/O复用+多线程业务工作池
- 单线程多路I/O复用+多线程多路I/O复用
- 单进程多路I/O复用+多进程多路I/O复用
- 单线程多路I/O复用+多线程多路I/O复用+ 多线程